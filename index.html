<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Linux Treasure Hunt ‚Äî Heist Edition</title>
  <style>
    body{margin:0;background:#0a0f1c;color:#cbd5e1;font-family:ui-monospace,monospace;}
    .container{max-width:960px;margin:0 auto;padding:20px;}
    h1{color:#ffd166;}
    .story{background:#111827;padding:12px;border-radius:8px;margin-bottom:12px;color:#9ca3af;}
    .terminal{background:#000;color:#9ae6b4;border-radius:8px;padding:12px;height:400px;overflow:auto;}
    .prompt{display:flex;gap:6px;align-items:center;margin-top:6px;}
    input{flex:1;background:transparent;border:0;color:#fff;font:inherit;outline:none;}
    .status{margin-top:8px;font-weight:bold;color:#ffd166;}
    .command{color:#a5f3fc;}
    .success{color:#4ade80;}
    .error{color:#f87171;}
  </style>
</head>
<body>
  <div class="container">
    <h1>üè¥‚Äç‚ò†Ô∏è Linux Treasure Hunt ‚Äî Heist Edition</h1>
    <div class="story" id="story">You are a hacker-thief. Break into the vault by finding <code>/vault/entrance</code>.</div>
    <div id="terminal" class="terminal"></div>
    <form id="form" class="prompt">
      <div style="color:#94a3b8">$</div>
      <input id="input" autocomplete="off" placeholder="Type a command (try 'help')" />
    </form>
    <div class="status" id="status">Level 1: Break In ‚Äî Navigate to /vault/entrance</div>
  </div>

  <script>
    (function(){
      const fs = {
        '/': ['home','vault'],
        '/vault': ['entrance','documents'],
        '/home': ['thief'],
        '/vault/entrance': [],
        '/vault/documents': ['map.txt'],
      };

      let cwd = '/';
      let level = 1;

      const term = document.getElementById('terminal');
      const form = document.getElementById('form');
      const input = document.getElementById('input');
      const status = document.getElementById('status');
      const story = document.getElementById('story');

      function print(text, cls){
        const d=document.createElement('div');
        if(cls) d.className=cls;
        d.textContent=text;
        term.appendChild(d);
        term.scrollTop=term.scrollHeight;
      }

      function normalizePath(path){
        if(!path) return cwd;
        if(path.startsWith('/')){
          path=path.replace(/\/+$/,'');
          return path||'/';
        }
        if(path==='..'){
          if(cwd==='/') return '/';
          const parts=cwd.split('/').filter(Boolean);
          parts.pop();
          return '/' + parts.join('/') || '/';
        }
        return cwd==='/'?`/${path}`:`${cwd}/${path}`;
      }

      function cmd_help(){print('Commands: help, pwd, ls, cd <dir>','command');}
      function cmd_pwd(){print(cwd);}
      function cmd_ls(args){
        const target=args[0]?normalizePath(args[0]):cwd;
        const listing=fs[target];
        if(!listing){print(`ls: cannot access ${args[0]||'.'}`,'error');return;}
        print(listing.join('  '));
      }
      function cmd_cd(args){
        if(!args[0]){print('cd: missing operand','error');return;}
        const target=normalizePath(args[0]);
        if(fs[target]){
          cwd=target;
          if(level===1 && target==='/vault/entrance'){
            level=2;
            print('‚úÖ You broke into the vault!','success');
            status.textContent='Level 2: Crack the Lock ‚Äî Create key.txt and remove alarm.txt';
            story.textContent='Inside the vault entrance, alarms are armed. Create a key and remove the alarm file.';
            fs['/vault/entrance']=['alarm.txt'];
          }
        } else {
          print(`cd: no such file or directory: ${args[0]}`,'error');
        }
      }

      function run(line){
        const raw=line.trim();
        if(!raw) return;
        print('$ '+raw,'command');
        const parts=raw.split(/\s+/);
        const cmd=parts[0];
        const args=parts.slice(1);
        switch(cmd){
          case 'help':cmd_help();break;
          case 'pwd':cmd_pwd();break;
          case 'ls':cmd_ls(args);break;
          case 'cd':cmd_cd(args);break;
          default:print(cmd+': command not found','error');
        }
      }

      print('Welcome to Linux Treasure Hunt!');
      print("Type 'help' to see commands.",'command');

      form.addEventListener('submit',e=>{
        e.preventDefault();
        run(input.value);
        input.value='';
      });
    })();
  </script>
</body>
</html>
